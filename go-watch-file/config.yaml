# 本文件用于后端静态配置与默认值
# 运行中可由控制台覆盖的字段会写入 config.runtime.yaml

# 文件监控配置
# 监控目录 留空则由控制台设置 支持多个目录 逗号或分号分隔
watch_dir: ""
# 排除目录 目录名或绝对路径 逗号或分号分隔
watch_exclude: ""
# 文件后缀过滤 逗号或空格分隔 为空表示不过滤
file_ext: ""
# 写入完成判定窗口 为空则使用默认值
silence: "10s"

# 通知配置 可选
# 机器人预留字段 当前未使用
robot_key: "${ROBOT_KEY}"
# 钉钉机器人
dingtalk_webhook: "${DINGTALK_WEBHOOK}"
dingtalk_secret: "${DINGTALK_SECRET}"

# 邮件通知 可选
email_host: "smtp.qq.com"
email_user: "${EMAIL_USER}"
email_pass: "${EMAIL_PASS}"
email_from: "${EMAIL_FROM}"
email_to: "${EMAIL_TO}"
email_port: 587
email_use_tls: true

# OSS 存储配置
bucket: "go-watch-file"
ak: "${OSS_AK}"
sk: "${OSS_SK}"
endpoint: "oss-cn-hangzhou.aliyuncs.com"
region: "cn-hangzhou"
force_path_style: false
disable_ssl: false

# 日志配置
log_level: "info"
log_file: "logs/file-monitor.log"
log_to_std: true
log_show_caller: false

# 上传并发配置
upload_workers: 10
upload_queue_size: 100
# 上传队列持久化（静态配置，需重启生效）
upload_queue_persist_enabled: false
upload_queue_persist_file: "logs/upload-queue.json"

# API 服务配置
# API 监听地址 控制台通过此地址访问接口
api_bind: ":8080"
# 管理接口鉴权令牌（建议从环境变量读取）
api_auth_token: "${API_AUTH_TOKEN}"
# 允许跨域来源列表（逗号分隔）可填写 * 表示放开
api_cors_origins: "${API_CORS_ORIGINS}"
# 系统资源面板开关 默认关闭
system_resource_enabled: false

# 告警配置（建议通过控制台设置）
# 规则内容存于 config.runtime.yaml 的 alert_rules
# 启用告警时必须配置日志路径并保存规则
alert_enabled: false
alert_suppress_enabled: true
# 告警规则文件路径（兼容字段，当前不再使用）
alert_rules_file: ""
# 需要监控的日志路径 逗号或分号分隔
alert_log_paths: ""
# 告警轮询间隔 支持 2s 2秒 2
alert_poll_interval: "2s"
# true 表示从文件末尾开始 仅处理新内容
alert_start_from_end: true

# AI 分析配置（默认关闭）
ai_enabled: true
ai_base_url: "${AI_BASE_URL}"
ai_api_key: "${AI_API_KEY}"
ai_model: "${AI_MODEL}"
ai_timeout: "90s"
ai_max_lines: 200
