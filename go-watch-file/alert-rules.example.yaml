version: 1
defaults:
  suppress_window: 5m
  match_case: false

escalation:
  enabled: true
  level: fatal
  window: 5m
  threshold: 20
  suppress_window: 5m
  rule_id: system_spike
  title: 系统异常激增
  message: 系统异常在5分钟内达到20次

rules:
  - id: ignore_debug
    title: 低优先级忽略
    level: ignore
    keywords:
      - debug
      - trace
    excludes:
      - important
  - id: biz_order
    title: 订单落库失败
    level: business
    suppress_window: 10m
    keywords:
      - order write failed
      - 订单落库失败
  - id: system_db
    title: 数据库连接池耗尽
    level: system
    keywords:
      - Connection is not available
      - 连接池耗尽
  - id: system_timeout
    title: 核心服务超时
    level: system
    keywords:
      - timeout
      - timed out
      - 超时
  - id: fatal_oom
    title: 内存溢出
    level: fatal
    keywords:
      - OutOfMemoryError
      - 内存溢出
