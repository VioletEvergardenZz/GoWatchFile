# 运维知识库实施清单（v0.1）

- 基线日期：2026-02-17
- 对应 PRD：`docs/04-知识库/运维知识库PRD.md`
- 状态说明：
  - `[x]` 已完成
  - `[-]` 进行中
  - `[ ]` 待开始

## 1. 任务拆解（后端）

- [x] 新增知识库存储层 `internal/kb`（SQLite + 表结构迁移）
- [x] 新增知识条目 API 路由 `/api/kb/*`
- [x] 实现基础 CRUD（创建、更新、详情、列表）
- [x] 实现状态流转动作（submit/approve/reject/archive）
- [x] 实现版本回滚动作（rollback）
- [x] 实现文档导入接口（`/api/kb/import/docs`）
- [x] 实现基础检索与问答接口（`/api/kb/search`、`/api/kb/ask`）
- [x] 实现告警推荐接口（`/api/kb/recommendations`）
- [x] 增加 API 单元测试（kb handler 维度）
- [x] 增加数据迁移与回滚说明文档

## 2. 任务拆解（前端）

- [x] 新增知识库控制台视图（`knowledge`）
- [x] 新增知识库 API 客户端封装（dashboardApi）
- [x] 新增知识列表/详情/编辑页面骨架
- [x] 新增状态流转和版本回滚操作入口
- [x] 新增文档导入入口
- [x] 新增知识问答入口与引用展示
- [x] 在告警详情嵌入知识推荐卡片
- [x] 细化编辑器体验（Markdown 预览、diff）

## 3. 任务拆解（测试与验收）

- [x] 后端编译与回归：`go test ./...`
- [x] 前端编译与类型检查：`npm run build`
- [x] 端到端验收用例（导入 -> 发布 -> 检索 -> 问答 -> 推荐）
- [x] 典型问题命中率测试（20 条样本）
- [x] MTTD 下降验证（告警场景对比）

## 4. 下一轮优先事项

- [-] 增加知识库指标看板（`kb_search_hit_ratio`、`kb_ask_citation_ratio`、`kb_review_latency_ms`）
  - 进度：后端指标已落地，已补充指标字典与阈值草案，待前端看板收口
- [ ] 增加“问答降级可视化”提示（显示 `degraded`、`errorClass` 与回退依据）
- [ ] 增加知识条目批量标签治理工具（重命名、合并、去重）
- [ ] 增加复审任务自动化（按 `needsReview` 生成待办并支持导出）
- [ ] 增加知识条目质量门禁（发布前校验引用完整性与变更说明）

