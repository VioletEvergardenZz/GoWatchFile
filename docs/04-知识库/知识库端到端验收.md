# 运维知识库端到端验收用例

> 文档状态：兼容保留

更新时间：2026-02-18

## 1. 验收目标

验证闭环：`导入 -> 发布 -> 检索 -> 问答 -> 告警推荐`

## 2. 前置条件

1. 服务已启动，API 可访问：`http://localhost:8082`
2. 跨域配置已确认：
   - 默认可不配置 `API_CORS_ORIGINS`（后端会放开跨域）
   - 若需限制来源，已在后端配置允许的 Origin 白名单
3. 前端控制台可访问：`http://localhost:8081`

## 3. 用例清单

### 用例 A：文档导入

1. 在知识库页面点击“导入 docs”。
2. 预期结果：
   - 返回导入统计（新增/更新/跳过）。
   - 列表可看到导入条目。

### 用例 B：条目发布流

1. 新建条目并保存。
2. 点击“提交审核”。
3. 点击“发布”。
4. 预期结果：
   - 条目状态变为 `published`。
   - 版本号递增。

### 用例 C：检索

1. 输入关键词执行“刷新”或“语义检索”。
2. 预期结果：
   - 列表命中相关条目。
   - 条目摘要与标签可见。

### 用例 D：问答（引用强约束）

1. 输入问题点击“提问”。
2. 预期结果：
   - 返回答案。
   - 返回 `citations` 且至少 1 条。

### 用例 E：告警推荐

1. 进入告警控制台，切到“告警”面板。
2. 在告警列表选择一条告警。
3. 预期结果：
   - “知识库推荐”卡片显示匹配条目。
   - 显示标题、版本、级别、状态。

### 用例 F：回滚

1. 对条目连续编辑两次生成多版本。
2. 输入目标版本号点击“执行回滚”。
3. 预期结果：
   - 版本号再次递增。
   - 内容回到目标版本快照。

## 4. 验收记录模板

| 用例 | 执行人 | 日期 | 结果(P/F) | 备注 |
| --- | --- | --- | --- | --- |
| A |  |  |  |  |
| B |  |  |  |  |
| C |  |  |  |  |
| D |  |  |  |  |
| E |  |  |  |  |
| F |  |  |  |  |
