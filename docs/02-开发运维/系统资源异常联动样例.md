# 系统资源异常联动样例

> 文档状态：兼容保留  
> 更新时间：2026-02-24  
> 适用范围：`/api/system`、告警控制台、知识库推荐链路

## 1. 目标

给出“资源异常 -> 告警处置 -> 知识建议”的最小联动样例，避免系统资源面板只停留在观测而无法进入闭环处置

## 2. 默认策略与边界

1. `system_resource_enabled` 默认 `false`
2. 未开启时，`GET /api/system` 返回 `403`
3. 开启后建议优先使用 `mode=light` 或 `mode=lite` 做高频轮询

## 3. 联动样例 A：CPU 异常升高

### 触发条件

- `systemGauges.cpu.usedPct` 持续高于阈值

### 联动动作

1. 在告警控制台记录“资源异常”事件
2. 在知识库检索“CPU 高负载排障”条目
3. 将处置建议写入值班记录

### 预期

- 告警记录中可关联知识建议
- 值班人员可按知识条目执行排障步骤

## 4. 联动样例 B：磁盘使用率接近上限

### 触发条件

- `systemVolumes[*].usedPct` 持续接近容量阈值

### 联动动作

1. 在告警控制台确认是否触发升级策略
2. 在知识库检索“磁盘清理/归档”条目
3. 结合上传队列状态确认是否存在写入阻塞风险

### 预期

- 能形成“资源异常 -> 告警 -> 知识建议 -> 执行动作”记录
- 排障后回看队列与上传失败指标有恢复趋势

## 5. 联动样例 C：异常进程识别与处置

### 触发条件

- `systemProcesses` 出现异常高占用或僵死进程

### 联动动作

1. 按进程信息定位服务与模块
2. 结合告警决策与知识库条目评估是否终止进程
3. 必要时调用 `/api/system/terminate` 做轻量处置

### 预期

- 处置动作有记录、可追溯
- 不影响主线 API 可用性

## 6. 演练记录模板

| 场景 | 执行人 | 日期 | 结果(P/F) | 告警联动 | 知识建议 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| CPU 异常 |  |  |  |  |  |  |
| 磁盘异常 |  |  |  |  |  |  |
| 进程异常 |  |  |  |  |  |  |

## 7. 关联文档

- `docs/02-开发运维/系统资源控制台说明.md`
- `docs/03-告警与AI/告警模式说明.md`
- `docs/04-知识库/知识库端到端验收.md`

