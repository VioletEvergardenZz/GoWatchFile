# 功能模块说明

> 文档状态：现行（主线）  
> 校准日期：2026-02-24
> 口径说明：该文档为主线口径，发生边界变更时需优先更新。

## 1. 模块分级

### 1.1 主线模块

1. 文件入云
2. 告警监控与决策
3. AI 分析与降级
4. 运维知识库复用
5. 统一控制台与闭环视图

### 1.2 支撑模块

1. 控制面与 Agent 管理
2. 系统/主机资源采集
3. 通知通道

## 2. 模块边界一览

| 模块 | 输入 | 输出 | 关键接口 | 边界说明 |
| --- | --- | --- | --- | --- |
| 文件入云 | 本地文件事件、手动/API 上传请求 | 上传记录、失败统计、队列指标、运行态快照 | `/api/dashboard` `/api/manual-upload` `/api/config` | 当前主线输入能力，负责事件样本稳定入云与可观测反馈 |
| 告警监控与决策 | 日志输入、规则配置 | 告警概览、决策列表、规则状态、通知触发 | `/api/alerts` `/api/alert-config` `/api/alert-rules` | 负责告警判断与治理，不负责长周期分析报表 |
| AI 分析与降级 | 日志片段、告警上下文、模型配置 | 结构化摘要、失败分类、降级结果 | `/api/ai/log-summary` | 当前主线诊断能力，必须保证失败可降级、结果可追溯 |
| 运维知识库复用 | 文档导入、条目编辑、问答请求、告警上下文 | 条目版本、检索结果、引用答案、推荐项、追溯关联 | `/api/kb/*` | 负责经验沉淀与复用，不替代外部文档系统 |
| 统一控制台与闭环视图 | 用户交互、模块请求 | 发现/诊断/回放/追溯统一视图与操作入口 | `console-frontend` + `go-watch-file` API | 承载闭环流程，不承载后端执行逻辑 |
| 控制面与 Agent 管理 | Agent 注册/心跳、任务创建请求 | Agent 列表、任务状态、任务事件、审计日志 | `/api/control/*` | 当前为单实例控制面 MVP，作为主线支撑能力 |
| 系统资源采集 | 主机运行数据、控制台查询参数 | 资源概览、进程清单、终止结果 | `/api/system` `/api/system/terminate` | 提供主机级观测与轻量处置，不负责 CMDB |
| 通知通道 | 告警结果、上传状态、AI 摘要 | 钉钉/邮件通知结果 | 告警通知与上传通知配置接口 | 属于运维执行补充通道，依赖主线模块触发 |

## 3. 模块协作关系

1. 文件入云模块先把事件样本稳定送入系统，形成后续告警与分析的输入基础。
2. 告警模块将异常信号沉淀为可处置事件，并触发通知、AI 分析与知识推荐链路。
3. AI 模块输出结构化研判结果，并在失败场景提供降级结果供值班继续处置。
4. 知识库模块提供可引用答案，支撑告警处置与经验复用，并将推荐结果按告警 ID 回写追溯信息；条目生命周期统一为 `draft -> reviewing -> published -> archived`（支持 `reject` 回到 `draft`）。
5. 统一控制台把发现、诊断、回放、追溯串到同一路径，减少跨页面切换成本。
6. 控制面、系统资源、通知模块作为支撑层，保障主线闭环可执行、可观测、可回滚。

## 4. 模块负责人需要维护的文档

- 控制面模块：更新 `docs/03-能力模块/功能模块说明.md` 与控制面专题设计文档。
- 告警模块：更新 `docs/03-告警与AI/` 下操作与验收文档。
- 知识库模块：更新 `docs/04-知识库/` 下流程与样本资产。
- 资源采集模块：更新 `docs/02-开发运维/系统资源控制台说明.md`。
- 指标评估模块：更新 `docs/05-指标与评估/` 下指标与报告模板。

## 5. 新模块接入规范

新增能力必须先补齐以下信息后再开发：

1. 模块目标与不做范围。
2. 输入输出定义。
3. API 契约与数据持久化策略。
4. 对现有核心模块的影响评估。
5. 对应监控指标与验收标准。
