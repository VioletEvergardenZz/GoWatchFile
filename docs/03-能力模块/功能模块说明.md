# 功能模块说明

## 1. 模块分级

### 1.1 核心模块

1. 控制面与 Agent 管理
2. 告警监控与决策
3. 系统/主机资源采集
4. 运维知识库
5. 平台控制台与统一 API

### 1.2 辅助模块

1. 文件监控与上传适配器
2. 通知通道
3. AI 增强分析

## 2. 模块边界一览

| 模块 | 输入 | 输出 | 关键接口 | 边界说明 |
| --- | --- | --- | --- | --- |
| 控制面与 Agent 管理 | Agent 注册/心跳、任务创建请求 | Agent 列表、任务状态、任务事件、审计日志 | `/api/control/*` | 当前是单实例控制面 MVP，非完整分布式编排平台 |
| 告警监控与决策 | 日志输入、规则配置 | 告警概览、决策列表、规则状态、通知触发 | `/api/alerts` `/api/alert-config` `/api/alert-rules` | 负责告警判断与治理，不负责长周期分析报表 |
| 系统资源采集 | 主机运行数据、控制台查询参数 | 资源概览、进程清单、终止结果 | `/api/system` `/api/system/terminate` | 负责主机级观测与轻量处置，不负责 CMDB |
| 运维知识库 | 文档导入、条目编辑、问答请求 | 条目版本、检索结果、引用答案、推荐项 | `/api/kb/*` | 负责知识沉淀与复用，不替代外部文档系统 |
| 平台控制台与统一 API | 用户交互、模块请求 | 统一运维视图与操作入口 | `console-frontend` + `go-watch-file` API | 控制台承载操作视图，不承载业务执行逻辑 |
| 文件监控与上传适配器 | 本地文件系统事件 | 上传记录、失败统计、上传指标 | `/api/dashboard` `/api/manual-upload` | 为输入侧能力，不再定义平台主线 |
| 通知与 AI 增强 | 告警结果、日志片段、问答请求 | 钉钉/邮件通知、AI 摘要与建议 | `/api/ai/log-summary` | 属于增强层，默认允许降级 |

## 3. 模块协作关系

1. 控制面模块为任务执行主入口，负责 Agent 与任务生命周期。
2. 告警模块将异常信号沉淀为可处置事件，并可触发通知与知识推荐。
3. 系统资源模块提供故障上下文，支撑告警和任务排障。
4. 知识库模块提供可引用答案，支撑告警处置与经验复用。
5. 文件适配器模块为平台提供已落地输入源，但不再主导架构。

## 4. 模块负责人需要维护的文档

- 控制面模块：更新 `docs/03-能力模块/功能模块说明.md` 与控制面专题设计文档。
- 告警模块：更新 `docs/03-告警与AI/` 下操作与验收文档。
- 知识库模块：更新 `docs/04-知识库/` 下流程与样本资产。
- 资源采集模块：更新 `docs/02-开发运维/系统资源控制台说明.md`。
- 指标评估模块：更新 `docs/05-指标与评估/` 下指标与报告模板。

## 5. 新模块接入规范

新增能力必须先补齐以下信息后再开发：

1. 模块目标与不做范围。
2. 输入输出定义。
3. API 契约与数据持久化策略。
4. 对现有核心模块的影响评估。
5. 对应监控指标与验收标准。
