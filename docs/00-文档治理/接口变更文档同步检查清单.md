# 接口变更文档同步检查清单

> 文档状态：治理基线
> 校准日期：2026-02-24
> 适用范围：`go-watch-file/`、`console-frontend/` 及 `docs/` 主线与专题文档

## 1. 目的

确保接口变更后“代码行为、控制台展示、运维手册、回归门禁”保持一致，避免出现以下问题：

- 代码已变更，但文档仍是旧口径
- 前后端联调时字段语义不一致
- 值班排障按旧手册执行导致误判

## 2. 触发条件

出现任一情况时，必须执行本清单：

1. 新增、修改、下线任一 API 接口
2. 接口请求参数、响应字段、默认值发生变化
3. 接口错误码、降级策略、匿名访问策略发生变化
4. 指标字段、阈值口径、告警表达式发生变化
5. 控制台页面对接口字段的展示语义发生变化

## 3. 必须同步的文档

按变更范围至少更新以下文档：

1. 仓库入口与组件文档
- `README.md`
- `go-watch-file/README.md`
- `console-frontend/README.md`

2. 主线口径文档
- `docs/01-平台定位/项目定位与主线能力.md`
- `docs/02-架构设计/总体架构说明.md`
- `docs/03-能力模块/功能模块说明.md`
- `docs/04-路线图与计划/TODO.md`

3. 专题运行文档（按需）
- `docs/02-开发运维/前后端联动说明.md`
- `docs/02-开发运维/开发指南.md`
- `docs/02-开发运维/常见问题.md`
- `docs/03-告警与AI/*.md`
- `docs/04-知识库/*.md`
- `docs/05-指标与评估/*.md`

## 4. 检查步骤

1. 接口契约核对
- 检查请求参数、响应字段、默认值、边界值是否有变更
- 对照前端类型定义与页面文案，确认字段语义一致

2. 降级与错误语义核对
- 检查 `/api/dashboard`、`/api/health`、`/metrics` 在异常场景下的返回口径
- 明确是否需要补充 FAQ 与排障手册

3. 指标与门禁核对
- 若指标口径变化，更新指标字典与阈值文档
- 若门禁变化，更新回归报告模板与脚本参数说明

4. 文档导航核对
- 如新增文档，更新 `docs/README.md` 与 `docs/文档导航.md`
- 如迁移文档，更新 `docs/98-历史兼容/旧文档映射.md`

## 5. 提交前自检

- [ ] 变更接口在文档中有明确路径与行为说明
- [ ] 文档中的示例请求/响应与当前实现一致
- [ ] 受影响的主线文档已同步更新
- [ ] 受影响的专题手册已同步更新
- [ ] 根目录与组件 README 已同步回链
- [ ] `docs/00-文档治理/文档现行状态清单.md` 已完成必要更新

## 6. 与门禁的关系

本清单是文档门禁的最小执行标准，不替代代码与构建门禁。  
涉及接口变更的任务仍需满足：

- `cd go-watch-file && go test ./... -count=1`
- `cd console-frontend && npm run build`

