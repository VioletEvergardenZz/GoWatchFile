# 通用文件监控与处理平台概述

> 目标：将“文件监控 + 上传 + 触发处理”抽象为通用平台，支持多种业务文件的自动入云、分发与后续处理。

## 核心能力
- **递归监控**：Agent 递归监听目录，自动发现新建子目录，按后缀过滤目标文件。
- **写入完成判定**：通过静默窗口判定写入完成，避免上传半截文件。
- **异步上传**：并发上传到 S3 兼容对象存储，队列背压可配置。
- **触发处理**：上传后触发 Jenkins Job（后续可扩展为 Webhook/脚本/消息队列）。
- **通知告警**：企业微信/钉钉机器人推送结果或异常。

## 典型场景
- 日志归档与合规留存（`.log`）
- 业务落地文件入云（`.txt`/`.csv`）
- 模型产物与离线包推送（`.zip`）
- 统一文件入口（图片、文档、任务产物等）

## 组件与职责
- **go-watch-file Agent**：目录监听、写入完成判定、上传、触发与通知。
- **对象存储**：统一存储与生命周期管理（AWS/MinIO/OSS/COS）。
- **处理链路（Action）**：Jenkins/HTTP/Webhook/脚本等后续处理能力。
- **通知服务**：企业微信/钉钉/自定义通知渠道。

## 工作流概览
1. 文件写入到监控目录（支持子目录）。
2. Agent 检测目标后缀并进入写入完成判定。
3. 写入完成后上传至对象存储，生成下载链接。
4. 触发 Jenkins Job（或替代动作）并发送通知。

## 现状与约束
- 当前版本 **仅支持单一后缀**（`file_ext`），多后缀与忽略规则属于后续迭代。
- Jenkins 配置目前为必填项，暂无“禁用触发”的开关（计划在后续版本补齐）。

## 进一步阅读
- 架构流程图：`docs/system-flowchart.md`
- 开发指南：`docs/dev-guide.md`
- 常见问题：`docs/faq.md`

## 历史材料
旧版 OOM 堆转储相关文档已归档至 `legacy/oom/`，仅供参考。
