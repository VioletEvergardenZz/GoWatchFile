# 通用文件监控与处理平台概述

> 目标：将“文件监控 + 上传 + 路由/处理”抽象为通用平台，支持多种业务文件的自动入云、分发与后续处理。

## 核心能力
- **递归监控**：Agent 递归监听目录，自动发现新建子目录，按后缀过滤目标文件。
- **写入完成判定**：通过静默窗口判定写入完成，避免上传半截文件。
- **异步上传**：并发上传到 S3 兼容对象存储，队列背压可配置。
- **触发处理（规划中）**：上传后可扩展 Webhook/脚本/消息队列等动作（当前不使用 Jenkins）。
- **通知告警**：企业微信/钉钉机器人推送结果或异常。

## 典型场景
- 日志归档与合规留存（`.log`）
- 业务落地文件入云（`.txt`/`.csv`）
- 模型产物与离线包推送（`.zip`）
- 统一文件入口（图片、文档、任务产物等）

## 组件与职责
- **go-watch-file Agent**：目录监听、写入完成判定、上传与通知，后续可扩展触发动作。
- **对象存储**：统一存储与生命周期管理（AWS/MinIO/OSS/COS）。
- **处理链路（Action）**：HTTP/Webhook/脚本/队列等后续处理能力（可插拔）。
- **通知服务**：企业微信/钉钉/自定义通知渠道。

## 工作流概览
1. 文件写入到监控目录（支持子目录）。
2. Agent 检测目标后缀并进入写入完成判定。
3. 写入完成后上传至对象存储，生成下载链接并发送通知。
4. （规划中）按规则触发 Webhook/脚本/队列等后续动作。

## 现状与约束
- 当前版本 **仅支持单一后缀**（`file_ext`），多后缀与忽略规则属于后续迭代。
- 当前未启用 Jenkins 模块；后续处理动作将以可插拔方式支持。 

## 进一步阅读
- 架构流程图：`docs/system-flowchart.md`
- 开发指南：`docs/dev-guide.md`
- 常见问题：`docs/faq.md`

## 历史材料
旧版 OOM 堆转储相关文档已归档至 `legacy/oom/`，仅供参考。
