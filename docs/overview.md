# 通用文件监控与处理平台概述

> 目标：将“文件监控 + 上传 + 通知 + 可视化”抽象为通用平台，支持多种业务文件的自动入云、观察与追踪。

## 当前实现（与代码一致）
- **Agent（go-watch-file）**：递归监控目录，静默窗口判定写入完成，上传至 S3 兼容存储。
- **控制台 API**：聚合仪表盘数据，提供自动上传开关、手动上传、文件 Tail/检索 与运行时配置更新。
- **告警决策模块**：轮询日志文件，规则匹配与抑制/升级决策，提供告警面板与配置接口。
- **前端控制台**：展示目录树、文件列表、上传记录、队列趋势、监控摘要与 Tail。
- **系统资源面板**：提供 CPU/内存/磁盘/进程概览接口，供资源管理控制台使用（默认关闭，可在控制台启用）。
- **通知**：钉钉机器人通知 / 邮件通知（可选）。

## 典型工作流
1) 文件写入到监控目录（支持子目录）。
2) Agent 判断后缀并等待静默窗口结束。
3) 进入上传队列 → worker 并发上传至 S3。
4) 运行态记录上传结果，并通过 API 提供给控制台。
5) （可选）钉钉通知发送上传结果，邮件同步通知。
6) （可选）告警模块轮询日志并生成告警决策，控制台展示风险概览。

## 现状与限制
- **多监控目录**：`watch_dir` 支持逗号或分号分隔，`file_ext` 为空时视为不过滤，支持多后缀配置。
- **队列在内存中**：重启后清空；无自动重试与断点续传。
- **通知渠道有限**：当前钉钉通知 + 邮件通知，企业微信仅保留字段。
- **无多 Agent 管理**：控制面为本地 API + 前端。
- **系统资源面板默认关闭**：需要在控制台配置开启后才能访问 `/api/system`。

## 规划方向（概览）
- 失败重试、指标暴露（Prometheus）。
- 多 Agent 管理、配置中心、统一鉴权与审计。
- 路由/编排、Webhook/队列触发、报表与高级告警体系。

详细规划见 `todo.md` 与 `大纲.md`。

## 进一步阅读
- 流程图：`docs/system-flowchart.md`
- 开发指南：`docs/dev-guide.md`
- 前后端联动：`docs/frontend-backend-linkage.md`
- DTO 结构：`docs/state-types-visual.md`
- 告警模式：`docs/alert-mode.md`
- 告警控制台：`docs/alert-console.md`
- FAQ：`docs/faq.md`
