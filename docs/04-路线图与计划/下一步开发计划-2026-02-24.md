# 下一步开发计划（2026-02-24）

> 文档状态：现行（主线）  
> 更新时间：2026-02-24  
> 适用阶段：阶段 A 收口（当前 2~4 周）  
> 口径说明：本计划仅覆盖 A 类任务，不扩展到 B/C 类范围

## 0. 当前进展（2026-02-24）

- 波次 1（AI 周度基线复盘）已落地文档与模板：
  - `docs/03-告警与AI/AI周度基线复盘手册.md`
  - `docs/05-指标与评估/AI周度基线复盘模板-v1.md`
- 主线 TODO 已完成对应 P0 条目（AI 周度复盘）
- 波次 2（知识导入失败与回滚演练）已落地演练手册：
  - `docs/04-知识库/知识导入失败与回滚演练手册.md`
- 主线 TODO 已完成对应 P0 条目（知识导入失败与回滚）
- 波次 3（控制台闭环与 dashboard 降级校验）已落地验收清单：
  - `docs/02-开发运维/控制台闭环与降级验收清单.md`
- 主线 TODO 已完成对应 P0 条目（闭环路径说明、dashboard 降级校验）
- 波次 4（系统资源权限边界与联动样例）已落地文档：
  - `docs/02-开发运维/系统资源控制台说明.md`
  - `docs/02-开发运维/系统资源异常联动样例.md`
- 主线 TODO 已完成对应 P0 条目（系统资源边界、资源异常联动）
- 基础门禁已验证通过：
  - 后端：`cd go-watch-file && go test ./... -count=1`
  - 前端：`source /etc/profile && cd console-frontend && npm run build`

## 1. 本轮目标与边界

### 1.1 目标

在不扩张范围前提下，完成剩余 P0 任务收口，确保以下闭环可验收：

1. AI 分析质量周度复盘可执行
2. 知识导入失败与回滚演练可复现
3. 控制台“发现 -> 诊断 -> 回放 -> 追溯”路径有统一验收清单
4. `/api/dashboard` 降级视图校验可回归
5. 系统资源采集边界与联动示例可执行

### 1.2 范围边界

仅处理 `docs/04-路线图与计划/TODO.md` 中剩余 P0 项：

- `1.3` AI 分析与降级：周度对比复盘
- `1.4` 知识库复用：导入失败与回滚演练
- `1.5` 统一控制台闭环：路径说明与验收、dashboard 降级校验
- `1.6` 支撑能力：系统资源权限边界、资源异常联动示例

不进入以下范围：

- 控制面分组调度与批量任务（P1）
- 跨模块 SLA/SLO 固化（P1）
- 非文件输入适配器与权限分层（P2）

## 2. 执行顺序（四个波次）

## 波次 1：AI 周度基线复盘固化（D1~D3）

### 要解决的问题

当前 AI 回放与基线脚本已具备，但“周度执行节奏 + 报告归档口径”未固定，导致同脚本不同环境下结果不可横向对比

### 开发动作

1. 补齐周度执行文档（固定命令、固定产物命名、固定门禁阈值）
2. 新增周度复盘模板（本周 vs 上周，异常分类对比）
3. 在 `TODO` 与 `开发指南` 中回链统一入口

### 产物

- 周度 AI 复盘手册（新文档）
- 周度 AI 复盘模板（新文档）
- `TODO` 回链更新

### 验收口径

- 可在 30 分钟内按文档完成一轮 AI 回放 + 基线验证
- 输出文件命名和字段结构可稳定复用
- 门禁阈值与 `ai-replay.ps1`/`ai-baseline.ps1` 参数一致

## 波次 2：知识导入失败与回滚演练补齐（D4~D6）

### 要解决的问题

知识库现有验收以“正常路径”为主，失败导入、回滚恢复、数据级回退缺少统一演练清单

### 开发动作

1. 增补导入失败场景（路径错误、格式异常、重复导入冲突）
2. 明确应用级回滚与数据级回滚的触发条件
3. 产出演练记录模板，纳入阶段复盘产物

### 产物

- `docs/04-知识库/` 下失败与回滚演练补充文档
- 与 `知识库迁移与回滚`、`端到端验收` 双向回链

### 验收口径

- 至少 3 个失败样例可稳定复现并有明确处置步骤
- 回滚后接口可用，核心链路（检索/问答）可恢复
- 演练结果可归档到 `reports/`

## 波次 3：控制台闭环验收与 dashboard 降级校验（D7~D10）

### 要解决的问题

“发现 -> 诊断 -> 回放 -> 追溯”操作路径已具备，但缺少统一验收视角；`/api/dashboard` 降级场景虽有实现，缺少面向值班的固定校验步骤

### 开发动作

1. 形成控制台闭环验收清单（按页面与 API 对照）
2. 增补 dashboard 降级校验用例（运行态未就绪、light 模式、错误提示）
3. 对齐 FAQ 与前后端联动说明

### 产物

- 控制台闭环验收清单（新文档）
- dashboard 降级校验步骤（文档补充）
- FAQ 与联动说明回链

### 验收口径

- 值班同学可按清单完整走通闭环路径
- `/api/dashboard` 与 `/api/dashboard?mode=light` 降级返回口径一致
- 前端不再出现“无指引的 500 排障”

## 波次 4：系统资源权限边界与异常联动示例（D11~D14）

### 要解决的问题

系统资源能力已有接口，但“何时开启、谁可开启、异常如何联动告警/知识建议”缺少统一说明与样例

### 开发动作

1. 明确系统资源采集开关与权限边界（默认策略 + 风险说明）
2. 增加资源异常联动样例（CPU/内存/磁盘/进程异常 -> 告警/知识建议）
3. 回写到 `TODO`、`开发指南`、`系统资源控制台说明`

### 产物

- 系统资源权限边界补充
- 资源异常联动样例文档

### 验收口径

- 能回答“什么环境该开、开到什么粒度、怎么回滚”
- 至少 2 条联动样例可按步骤执行
- 与现有告警和知识库文档口径一致

## 3. 统一门禁与回归节奏

每个波次收尾必须执行：

1. 后端：`cd go-watch-file && go test ./... -count=1`
2. 前端：`cd console-frontend && npm run build`
3. 关键接口核对：
   - `GET /api/health`
   - `GET /api/dashboard`
   - `GET /api/dashboard?mode=light`
   - `GET /metrics`

若本机为 macOS + nvm 场景，先执行：

`source /etc/profile && node -v && npm -v`

## 4. 风险与应对

1. 风险：文档先行但脚本参数变动导致口径再次漂移  
应对：每次脚本参数变更必须更新 `接口变更文档同步检查清单`

2. 风险：演练样例路径依赖本地环境，不同机器复现失败  
应对：所有样例路径给出“模板 + 实际路径”双写法

3. 风险：任务过多导致并行推进失焦  
应对：按波次串行推进，每次只关闭一个 P0 子目标

## 5. 完成定义（本计划）

当以下条件全部满足，视为本计划完成：

1. `TODO` 中剩余 P0 条目全部关闭
2. 每个条目都有可执行文档或脚本入口
3. 关键门禁命令在本地可执行且结果可归档
4. 文档导航与现行清单已同步更新

## 6. P0 收口后的执行周计划（2026-02-25 ~ 2026-03-03）

> 目的：把“文档完成”推进到“可回放、可复核、可归档”的实操状态。  
> 边界：仅执行 A 类收口动作，不进入 P1 新能力开发。

### 6.1 第 1 天：基础门禁与环境基线

1. 执行后端门禁：`cd go-watch-file && go test ./... -count=1`
2. 执行前端门禁：`source /etc/profile && cd console-frontend && npm run build`
3. 记录本周环境版本（Go/Node/NPM）并归档到 `reports/`

验收：门禁全部通过，版本信息可追溯。

### 6.2 第 2 天：AI 周度复盘首轮实跑

1. 按 `docs/03-告警与AI/AI周度基线复盘手册.md` 执行 `ai-replay.ps1` 与 `ai-baseline.ps1`
2. 产出本周结果：
   - `reports/ai-replay-YYYY-MM-DD.json`
   - `reports/ai-baseline-YYYY-MM-DD.json`
3. 按模板填写：`docs/05-指标与评估/AI周度基线复盘模板-v1.md`

验收：`gates.allPassed=true` 或已记录可解释失败原因与整改动作。

### 6.3 第 3 天：知识导入失败与回滚演练

1. 按 `docs/04-知识库/知识导入失败与回滚演练手册.md` 执行 A/B/C 三个场景
2. 验证回滚后接口：`/api/kb/articles`、检索、问答
3. 输出演练记录到 `reports/`（含根因与处置步骤）

验收：三类场景可复现、可恢复、可追溯。

### 6.4 第 4 天：控制台闭环与 dashboard 降级验收

1. 按 `docs/02-开发运维/控制台闭环与降级验收清单.md` 执行发现/诊断/回放/追溯
2. 验证 `GET /api/dashboard` 与 `GET /api/dashboard?mode=light` 在未就绪场景下的 `200` 降级语义
3. 记录异常样本与排障路径

验收：值班路径可走通，降级返回结构可被前端消费。

### 6.5 第 5 天：阶段复盘与风险收敛

1. 执行 `stage-recap.ps1` 汇总 AI/知识库/控制面/指标结果
2. 对照 `docs/04-路线图与计划/TODO.md` 复核“文档完成”和“实操完成”一致性
3. 输出本周复盘结论与下周风险列表

验收：`reports/stage-recap-result.json` 与周结论文档齐备，可作为下阶段输入。
